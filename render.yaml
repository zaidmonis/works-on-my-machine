services:
  - type: web
    name: works-on-my-machine-api
    env: node
    plan: free
    buildCommand: pnpm install --frozen-lockfile --prod=false && pnpm --filter api exec prisma generate && pnpm --filter api exec prisma migrate deploy && pnpm --filter api build
    startCommand: pnpm --filter api build && pnpm --filter api start
    envVars:
      - key: NODE_ENV
        value: production
      - key: JWT_SECRET
        sync: false
      - key: WEB_ORIGIN
        value: https://YOUR_GITHUB_USER.github.io/YOUR_REPO
      - key: DATABASE_URL
        value: file:/var/data/dev.db
    disk:
      name: api-data
      mountPath: /var/data
      sizeGB: 1
